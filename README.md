# Архитектура проекта "Разработка модели ИИ для категоризации рекламных баннеров"

## 1. Общий обзор
Проект предназначен для автоматизированной модерации макетов и видео с использованием ИИ. Основные функции включают:
- Анализ макетов и видео на соответствие юридическим требованиям и техническому заданию.
- Анализ документов с помощью OCR и NLP.
- Поиск похожих изображений.
- Авторазметку данных для обучения моделей.
- Масштабируемость, высокая доступность и интеграция с внешними сервисами.

## 2. Основные компоненты

### 2.1 Хранение данных
Данные проекта хранятся в следующей структуре:
```
moderation-ai-project/
│
├── data/                         
│   ├── images/                   
│   ├── models/               
│   ├── logs/            
│   ├── results/                
│
├── models/                        # Хранятся модели ИИ
│   ├── yolo/                      # Модели YOLO для анализа изображений
│   ├── document_analysis/         # Модели для анализа документов
│   │   ├── document_classifier.pt # Модель классификации документов
│   │   ├── ocr_model/             # OCR-модель
│
├── scripts/                       # Скрипты для работы проекта
│   ├── training/                  # Скрипты для обучения моделей
│   ├── auto_annotation/           # Скрипты для авторазметки
│   ├── document_analysis/         # Анализ документов
│   │   ├── analyze_documents.py   # Основной скрипт анализа документов
│   │   ├── ocr_processing.py      # OCR-обработка текста
│   │   ├── nlp_analysis.py        # NLP-анализ (NER, классификация и т.д.)
│   ├── utils/                     # Вспомогательные утилиты
│
├── config/                        # Конфигурационные файлы
│   ├── config.yaml                # Основные настройки проекта
│   ├── comet_config.yaml          # Настройки Comet ML
│   ├── document_analysis.yaml     # Параметры OCR и NLP
│
├── docs/                          # Документация по проекту
│   ├── README.md                  # Основная документация проекта
│   ├── API.md                     # Документация API
│   ├── ARCHITECTURE.md            # Описание архитектуры проекта
│
├── tests/                         # Тесты
│   ├── test_training.py           # Тесты для обучения моделей
│   ├── test_auto_annotation.py    # Тесты авторазметки
│   ├── test_document_analysis.py  # Тесты анализа документов
│
├── docker/                        # Docker-файлы
│   ├── Dockerfile                 # Основной Dockerfile
│   ├── docker-compose.yaml        # Компоновка сервисов
│
├── .github/                       # CI/CD и управление репозиторием
│   ├── workflows/                 # GitHub Actions для CI/CD
│   │   ├── training_pipeline.yml  # Автоматическое обучение модели
│   │   ├── tests.yml              # Запуск тестов
│
├── requirements.txt               # Список зависимостей Python
├── setup.py                       # Установка зависимостей
└── README.md                      # Основное описание проекта
```

## 3. Взаимодействие компонентов

### 3.1 Обучение моделей
- **YOLO:** Обучение моделей происходит с помощью `scripts/training/run_training.py`, данные загружаются из `data/yolo_apteka/`.
- **Документный анализ:** Используется `scripts/document_analysis/analyze_documents.py`, включая OCR (`ocr_processing.py`) и NLP-анализ (`nlp_analysis.py`).

### 3.2 Авторазметка
- `scripts/auto_annotation/auto_annotate.sh` автоматизирует разметку изображений через CVAT.
- `yolo_to_cvat.py` конвертирует разметку в нужный формат.

### 3.3 Анализ документов
- `ocr_processing.py` распознает текст в документах.
- `nlp_analysis.py` анализирует текст на предмет соответствия требованиям.

### 3.4 CI/CD и автоматизация
- **GitHub Actions** запускает тестирование и обучение моделей при обновлениях.
- **Comet ML** логирует эксперименты и обучение моделей.
- **Telegram-бот** (`notify_bot.py`) отправляет уведомления о статусе процессов.

## 4. Интеграции
- **АПР и РуссОнлайн** – взаимодействие через API.
- **CVAT** – авторазметка изображений.
- **YOLO, Comet ML** – обучение и логирование экспериментов.

## 5. Безопасность и масштабируемость
- **Docker** обеспечивает контейнеризацию.
- **CI/CD** гарантирует автоматизированную проверку изменений.
- **Система уведомлений** позволяет оперативно отслеживать процесс работы.
